"use strict";exports.id=526,exports.ids=[526],exports.modules={39526:(e,t,r)=>{r.d(t,{CreateTokenCommand:()=>Me,SSOOIDCClient:()=>se});var o=r(81095),n=r(39359),i=r(48377),s=r(30499),a=r(11487),c=r(63847),d=r(70649),p=r(99389),u=r(94171),l=r(77940),h=r(45685),m=r(47135);const g=async(e,t,r)=>({operation:(0,m.u)(t).operation,region:await(0,m.t)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()}),x=e=>{const t=[];switch(e.operation){case"CreateToken":case"RegisterClient":case"StartDeviceAuthorization":t.push({schemeId:"smithy.api#noAuth"});break;default:t.push(function(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sso-oauth",region:e.region},propertiesExtractor:(e,t)=>({signingProperties:{config:e,context:t}})}}(e))}return t},S={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}};var y=r(38257),f=r(94041),E=r(91701),v=r(51881),w=r(94029),I=r(7809),b=r(3323),P=r(82641),k=r(94572),O=r(33197),C=r(66652),_=r(23875);const $="required",D="fn",R="argv",T="ref",A=!0,j="isSet",z="booleanEquals",U="error",q="endpoint",N="tree",V="PartitionResult",G="getAttr",F={[$]:!1,type:"String"},H={[$]:!0,default:!1,type:"Boolean"},M={[T]:"Endpoint"},B={[D]:z,[R]:[{[T]:"UseFIPS"},!0]},J={[D]:z,[R]:[{[T]:"UseDualStack"},!0]},Z={},L={[D]:G,[R]:[{[T]:V},"supportsFIPS"]},W={[T]:V},K={[D]:z,[R]:[!0,{[D]:G,[R]:[W,"supportsDualStack"]}]},Y=[B],Q=[J],X=[{[T]:"Region"}],ee={version:"1.0",parameters:{Region:F,UseDualStack:H,UseFIPS:H,Endpoint:F},rules:[{conditions:[{[D]:j,[R]:[M]}],rules:[{conditions:Y,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:U},{conditions:Q,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:U},{endpoint:{url:M,properties:Z,headers:Z},type:q}],type:N},{conditions:[{[D]:j,[R]:X}],rules:[{conditions:[{[D]:"aws.partition",[R]:X,assign:V}],rules:[{conditions:[B,J],rules:[{conditions:[{[D]:z,[R]:[A,L]},K],rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Z,headers:Z},type:q}],type:N},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:U}],type:N},{conditions:Y,rules:[{conditions:[{[D]:z,[R]:[L,A]}],rules:[{conditions:[{[D]:"stringEquals",[R]:[{[D]:G,[R]:[W,"name"]},"aws-us-gov"]}],endpoint:{url:"https://oidc.{Region}.amazonaws.com",properties:Z,headers:Z},type:q},{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Z,headers:Z},type:q}],type:N},{error:"FIPS is enabled but this partition does not support FIPS",type:U}],type:N},{conditions:Q,rules:[{conditions:[K],rules:[{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Z,headers:Z},type:q}],type:N},{error:"DualStack is enabled but this partition does not support DualStack",type:U}],type:N},{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dnsSuffix}",properties:Z,headers:Z},type:q}],type:N}],type:N},{error:"Invalid Configuration: Missing Region",type:U}]},te=(e,t={})=>(0,_.sO)(ee,{endpointParams:e,logger:t.logger});_.mw.aws=C.UF;var re=r(44321);var oe=r(56928),ne=r(3608);const ie=e=>{const t=e.httpAuthSchemes;let r=e.httpAuthSchemeProvider,o=e.credentials;return{setHttpAuthScheme(e){const r=t.findIndex((t=>t.schemeId===e.schemeId));-1===r?t.push(e):t.splice(r,1,e)},httpAuthSchemes:()=>t,setHttpAuthSchemeProvider(e){r=e},httpAuthSchemeProvider:()=>r,setCredentials(e){o=e},credentials:()=>o}};class se extends l.Client{constructor(...[e]){const t=(e=>{(0,l.emitWarningIfUnsupportedVersion)(process.version);const t=(0,re.I)(e),r=()=>t().then(l.loadConfigsForDefaultMode),o=(e=>({apiVersion:"2019-06-10",base64Decoder:e?.base64Decoder??k.E,base64Encoder:e?.base64Encoder??k.n,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??te,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??x,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new h.AwsSdkSigV4Signer},{schemeId:"smithy.api#noAuth",identityProvider:e=>e.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new c.NoAuthSigner}],logger:e?.logger??new l.NoOpLogger,serviceId:e?.serviceId??"SSO OIDC",urlParser:e?.urlParser??P.D,utf8Decoder:e?.utf8Decoder??O.ar,utf8Encoder:e?.utf8Encoder??O.Pq}))(e);return(0,h.emitWarningIfUnsupportedVersion)(process.version),{...o,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:e?.bodyLengthChecker??I.n,credentialDefaultProvider:e?.credentialDefaultProvider??y.v6,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,f.mJ)({serviceId:o.serviceId,clientVersion:"3.583.0"}),maxAttempts:e?.maxAttempts??(0,v.Z)(u.qs),region:e?.region??(0,v.Z)(a.GG,a.zH),requestHandler:w.$c.create(e?.requestHandler??r),retryMode:e?.retryMode??(0,v.Z)({...u.kN,default:async()=>(await r()).retryMode||b.L0}),sha256:e?.sha256??E.V.bind(null,"sha256"),streamCollector:e?.streamCollector??w.kv,useDualstackEndpoint:e?.useDualstackEndpoint??(0,v.Z)(a.e$),useFipsEndpoint:e?.useFipsEndpoint??(0,v.Z)(a.Ko)}})(e||{}),r=(m=t,{...m,useDualstackEndpoint:m.useDualstackEndpoint??!1,useFipsEndpoint:m.useFipsEndpoint??!1,defaultSigningName:"sso-oauth"});var m;const g=(0,a.TD)(r),S=(0,p.Co)(g),C=(0,u.$z)(S),_=(0,o.OV)(C);var $;const D=((e,t)=>{const r={...(0,oe.Rq)(e),...(0,l.getDefaultExtensionConfiguration)(e),...(0,ne.getHttpHandlerExtensionConfiguration)(e),...ie(e)};return t.forEach((e=>e.configure(r))),{...e,...(0,oe.$3)(r),...(0,l.resolveDefaultRuntimeConfig)(r),...(0,ne.resolveHttpHandlerRuntimeConfig)(r),...(o=r,{httpAuthSchemes:o.httpAuthSchemes(),httpAuthSchemeProvider:o.httpAuthSchemeProvider(),credentials:o.credentials()})};var o})(($=(0,s.Dc)(_),{...(0,h.resolveAwsSdkSigV4Config)($)}),e?.extensions||[]);super(D),this.config=D,this.middlewareStack.use((0,u.ey)(this.config)),this.middlewareStack.use((0,d.vK)(this.config)),this.middlewareStack.use((0,o.TC)(this.config)),this.middlewareStack.use((0,n.Y7)(this.config)),this.middlewareStack.use((0,i.n4)(this.config)),this.middlewareStack.use((0,s.sM)(this.config)),this.middlewareStack.use((0,c.getHttpAuthSchemeEndpointRuleSetPlugin)(this.config,{httpAuthSchemeParametersProvider:this.getDefaultHttpAuthSchemeParametersProvider(),identityProviderConfigProvider:this.getIdentityProviderConfigProvider()})),this.middlewareStack.use((0,c.getHttpSigningPlugin)(this.config))}destroy(){super.destroy()}getDefaultHttpAuthSchemeParametersProvider(){return g}getIdentityProviderConfigProvider(){return async e=>new c.DefaultIdentityProviderConfig({"aws.auth#sigv4":e.credentials})}}var ae=r(1208);class ce extends l.ServiceException{constructor(e){super(e),Object.setPrototypeOf(this,ce.prototype)}}class de extends ce{constructor(e){super({name:"AccessDeniedException",$fault:"client",...e}),this.name="AccessDeniedException",this.$fault="client",Object.setPrototypeOf(this,de.prototype),this.error=e.error,this.error_description=e.error_description}}class pe extends ce{constructor(e){super({name:"AuthorizationPendingException",$fault:"client",...e}),this.name="AuthorizationPendingException",this.$fault="client",Object.setPrototypeOf(this,pe.prototype),this.error=e.error,this.error_description=e.error_description}}class ue extends ce{constructor(e){super({name:"ExpiredTokenException",$fault:"client",...e}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,ue.prototype),this.error=e.error,this.error_description=e.error_description}}class le extends ce{constructor(e){super({name:"InternalServerException",$fault:"server",...e}),this.name="InternalServerException",this.$fault="server",Object.setPrototypeOf(this,le.prototype),this.error=e.error,this.error_description=e.error_description}}class he extends ce{constructor(e){super({name:"InvalidClientException",$fault:"client",...e}),this.name="InvalidClientException",this.$fault="client",Object.setPrototypeOf(this,he.prototype),this.error=e.error,this.error_description=e.error_description}}class me extends ce{constructor(e){super({name:"InvalidGrantException",$fault:"client",...e}),this.name="InvalidGrantException",this.$fault="client",Object.setPrototypeOf(this,me.prototype),this.error=e.error,this.error_description=e.error_description}}class ge extends ce{constructor(e){super({name:"InvalidRequestException",$fault:"client",...e}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,ge.prototype),this.error=e.error,this.error_description=e.error_description}}class xe extends ce{constructor(e){super({name:"InvalidScopeException",$fault:"client",...e}),this.name="InvalidScopeException",this.$fault="client",Object.setPrototypeOf(this,xe.prototype),this.error=e.error,this.error_description=e.error_description}}class Se extends ce{constructor(e){super({name:"SlowDownException",$fault:"client",...e}),this.name="SlowDownException",this.$fault="client",Object.setPrototypeOf(this,Se.prototype),this.error=e.error,this.error_description=e.error_description}}class ye extends ce{constructor(e){super({name:"UnauthorizedClientException",$fault:"client",...e}),this.name="UnauthorizedClientException",this.$fault="client",Object.setPrototypeOf(this,ye.prototype),this.error=e.error,this.error_description=e.error_description}}class fe extends ce{constructor(e){super({name:"UnsupportedGrantTypeException",$fault:"client",...e}),this.name="UnsupportedGrantTypeException",this.$fault="client",Object.setPrototypeOf(this,fe.prototype),this.error=e.error,this.error_description=e.error_description}}class Ee extends ce{constructor(e){super({name:"InvalidRequestRegionException",$fault:"client",...e}),this.name="InvalidRequestRegionException",this.$fault="client",Object.setPrototypeOf(this,Ee.prototype),this.error=e.error,this.error_description=e.error_description,this.endpoint=e.endpoint,this.region=e.region}}class ve extends ce{constructor(e){super({name:"InvalidClientMetadataException",$fault:"client",...e}),this.name="InvalidClientMetadataException",this.$fault="client",Object.setPrototypeOf(this,ve.prototype),this.error=e.error,this.error_description=e.error_description}}class we extends ce{constructor(e){super({name:"InvalidRedirectUriException",$fault:"client",...e}),this.name="InvalidRedirectUriException",this.$fault="client",Object.setPrototypeOf(this,we.prototype),this.error=e.error,this.error_description=e.error_description}}const Ie=e=>({...e,...e.clientSecret&&{clientSecret:l.SENSITIVE_STRING},...e.refreshToken&&{refreshToken:l.SENSITIVE_STRING},...e.codeVerifier&&{codeVerifier:l.SENSITIVE_STRING}}),be=e=>({...e,...e.accessToken&&{accessToken:l.SENSITIVE_STRING},...e.refreshToken&&{refreshToken:l.SENSITIVE_STRING},...e.idToken&&{idToken:l.SENSITIVE_STRING}}),Pe=async(e,t)=>{const r=(0,c.requestBuilder)(e,t);let o;return r.bp("/token"),o=JSON.stringify((0,l.take)(e,{clientId:[],clientSecret:[],code:[],codeVerifier:[],deviceCode:[],grantType:[],redirectUri:[],refreshToken:[],scope:e=>(0,l._json)(e)})),r.m("POST").h({"content-type":"application/json"}).b(o),r.build()},ke=async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return Oe(e,t);const r=(0,l.map)({$metadata:He(e)}),o=(0,l.expectNonNull)((0,l.expectObject)(await(0,h.parseJsonBody)(e.body,t)),"body"),n=(0,l.take)(o,{accessToken:l.expectString,expiresIn:l.expectInt32,idToken:l.expectString,refreshToken:l.expectString,tokenType:l.expectString});return Object.assign(r,n),r},Oe=async(e,t)=>{const r={...e,body:await(0,h.parseJsonErrorBody)(e.body,t)},o=(0,h.loadRestJsonErrorCode)(e,r.body);switch(o){case"AccessDeniedException":case"com.amazonaws.ssooidc#AccessDeniedException":throw await _e(r,t);case"AuthorizationPendingException":case"com.amazonaws.ssooidc#AuthorizationPendingException":throw await $e(r,t);case"ExpiredTokenException":case"com.amazonaws.ssooidc#ExpiredTokenException":throw await De(r,t);case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await Re(r,t);case"InvalidClientException":case"com.amazonaws.ssooidc#InvalidClientException":throw await Te(r,t);case"InvalidGrantException":case"com.amazonaws.ssooidc#InvalidGrantException":throw await je(r,t);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await Ue(r,t);case"InvalidScopeException":case"com.amazonaws.ssooidc#InvalidScopeException":throw await Ne(r,t);case"SlowDownException":case"com.amazonaws.ssooidc#SlowDownException":throw await Ve(r,t);case"UnauthorizedClientException":case"com.amazonaws.ssooidc#UnauthorizedClientException":throw await Ge(r,t);case"UnsupportedGrantTypeException":case"com.amazonaws.ssooidc#UnsupportedGrantTypeException":throw await Fe(r,t);case"InvalidRequestRegionException":case"com.amazonaws.ssooidc#InvalidRequestRegionException":throw await qe(r,t);case"InvalidClientMetadataException":case"com.amazonaws.ssooidc#InvalidClientMetadataException":throw await Ae(r,t);case"InvalidRedirectUriException":case"com.amazonaws.ssooidc#InvalidRedirectUriException":throw await ze(r,t);default:const n=r.body;return Ce({output:e,parsedBody:n,errorCode:o})}},Ce=(0,l.withBaseException)(ce),_e=async(e,t)=>{const r=(0,l.map)({}),o=e.body,n=(0,l.take)(o,{error:l.expectString,error_description:l.expectString});Object.assign(r,n);const i=new de({$metadata:He(e),...r});return(0,l.decorateServiceException)(i,e.body)},$e=async(e,t)=>{const r=(0,l.map)({}),o=e.body,n=(0,l.take)(o,{error:l.expectString,error_description:l.expectString});Object.assign(r,n);const i=new pe({$metadata:He(e),...r});return(0,l.decorateServiceException)(i,e.body)},De=async(e,t)=>{const r=(0,l.map)({}),o=e.body,n=(0,l.take)(o,{error:l.expectString,error_description:l.expectString});Object.assign(r,n);const i=new ue({$metadata:He(e),...r});return(0,l.decorateServiceException)(i,e.body)},Re=async(e,t)=>{const r=(0,l.map)({}),o=e.body,n=(0,l.take)(o,{error:l.expectString,error_description:l.expectString});Object.assign(r,n);const i=new le({$metadata:He(e),...r});return(0,l.decorateServiceException)(i,e.body)},Te=async(e,t)=>{const r=(0,l.map)({}),o=e.body,n=(0,l.take)(o,{error:l.expectString,error_description:l.expectString});Object.assign(r,n);const i=new he({$metadata:He(e),...r});return(0,l.decorateServiceException)(i,e.body)},Ae=async(e,t)=>{const r=(0,l.map)({}),o=e.body,n=(0,l.take)(o,{error:l.expectString,error_description:l.expectString});Object.assign(r,n);const i=new ve({$metadata:He(e),...r});return(0,l.decorateServiceException)(i,e.body)},je=async(e,t)=>{const r=(0,l.map)({}),o=e.body,n=(0,l.take)(o,{error:l.expectString,error_description:l.expectString});Object.assign(r,n);const i=new me({$metadata:He(e),...r});return(0,l.decorateServiceException)(i,e.body)},ze=async(e,t)=>{const r=(0,l.map)({}),o=e.body,n=(0,l.take)(o,{error:l.expectString,error_description:l.expectString});Object.assign(r,n);const i=new we({$metadata:He(e),...r});return(0,l.decorateServiceException)(i,e.body)},Ue=async(e,t)=>{const r=(0,l.map)({}),o=e.body,n=(0,l.take)(o,{error:l.expectString,error_description:l.expectString});Object.assign(r,n);const i=new ge({$metadata:He(e),...r});return(0,l.decorateServiceException)(i,e.body)},qe=async(e,t)=>{const r=(0,l.map)({}),o=e.body,n=(0,l.take)(o,{endpoint:l.expectString,error:l.expectString,error_description:l.expectString,region:l.expectString});Object.assign(r,n);const i=new Ee({$metadata:He(e),...r});return(0,l.decorateServiceException)(i,e.body)},Ne=async(e,t)=>{const r=(0,l.map)({}),o=e.body,n=(0,l.take)(o,{error:l.expectString,error_description:l.expectString});Object.assign(r,n);const i=new xe({$metadata:He(e),...r});return(0,l.decorateServiceException)(i,e.body)},Ve=async(e,t)=>{const r=(0,l.map)({}),o=e.body,n=(0,l.take)(o,{error:l.expectString,error_description:l.expectString});Object.assign(r,n);const i=new Se({$metadata:He(e),...r});return(0,l.decorateServiceException)(i,e.body)},Ge=async(e,t)=>{const r=(0,l.map)({}),o=e.body,n=(0,l.take)(o,{error:l.expectString,error_description:l.expectString});Object.assign(r,n);const i=new ye({$metadata:He(e),...r});return(0,l.decorateServiceException)(i,e.body)},Fe=async(e,t)=>{const r=(0,l.map)({}),o=e.body,n=(0,l.take)(o,{error:l.expectString,error_description:l.expectString});Object.assign(r,n);const i=new fe({$metadata:He(e),...r});return(0,l.decorateServiceException)(i,e.body)},He=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]});class Me extends(l.Command.classBuilder().ep({...S}).m((function(e,t,r,o){return[(0,ae.TM)(r,this.serialize,this.deserialize),(0,p.rD)(r,e.getEndpointParameterInstructions())]})).s("AWSSSOOIDCService","CreateToken",{}).n("SSOOIDCClient","CreateTokenCommand").f(Ie,be).ser(Pe).de(ke).build()){}}};