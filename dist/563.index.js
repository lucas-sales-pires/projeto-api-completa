"use strict";exports.id=563,exports.ids=[563],exports.modules={62563:(e,t,s)=>{s.d(t,{GetRoleCredentialsCommand:()=>q,SSOClient:()=>Oe});var o=s(99389),n=s(1208),r=s(77940);const i={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}};class a extends r.ServiceException{constructor(e){super(e),Object.setPrototypeOf(this,a.prototype)}}class c extends a{constructor(e){super({name:"InvalidRequestException",$fault:"client",...e}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,c.prototype)}}class d extends a{constructor(e){super({name:"ResourceNotFoundException",$fault:"client",...e}),this.name="ResourceNotFoundException",this.$fault="client",Object.setPrototypeOf(this,d.prototype)}}class u extends a{constructor(e){super({name:"TooManyRequestsException",$fault:"client",...e}),this.name="TooManyRequestsException",this.$fault="client",Object.setPrototypeOf(this,u.prototype)}}class p extends a{constructor(e){super({name:"UnauthorizedException",$fault:"client",...e}),this.name="UnauthorizedException",this.$fault="client",Object.setPrototypeOf(this,p.prototype)}}const l=e=>({...e,...e.accessToken&&{accessToken:r.SENSITIVE_STRING}}),h=e=>({...e,...e.secretAccessKey&&{secretAccessKey:r.SENSITIVE_STRING},...e.sessionToken&&{sessionToken:r.SENSITIVE_STRING}}),m=e=>({...e,...e.roleCredentials&&{roleCredentials:h(e.roleCredentials)}});var g=s(45685),y=s(63847);const S=async(e,t)=>{const s=(0,y.requestBuilder)(e,t),o=(0,r.map)({},k,{[N]:e[R]});s.bp("/federation/credentials");const n=(0,r.map)({[O]:[,(0,r.expectNonNull)(e[D],"roleName")],[A]:[,(0,r.expectNonNull)(e[C],"accountId")]});return s.m("GET").h(o).q(n).b(void 0),s.build()},f=async(e,t)=>{if(200!==e.statusCode&&e.statusCode>=300)return v(e,t);const s=(0,r.map)({$metadata:I(e)}),o=(0,r.expectNonNull)((0,r.expectObject)(await(0,g.parseJsonBody)(e.body,t)),"body"),n=(0,r.take)(o,{roleCredentials:r._json});return Object.assign(s,n),s},v=async(e,t)=>{const s={...e,body:await(0,g.parseJsonErrorBody)(e.body,t)},o=(0,g.loadRestJsonErrorCode)(e,s.body);switch(o){case"InvalidRequestException":case"com.amazonaws.sso#InvalidRequestException":throw await P(s,t);case"ResourceNotFoundException":case"com.amazonaws.sso#ResourceNotFoundException":throw await E(s,t);case"TooManyRequestsException":case"com.amazonaws.sso#TooManyRequestsException":throw await b(s,t);case"UnauthorizedException":case"com.amazonaws.sso#UnauthorizedException":throw await w(s,t);default:const n=s.body;return x({output:e,parsedBody:n,errorCode:o})}},x=(0,r.withBaseException)(a),P=async(e,t)=>{const s=(0,r.map)({}),o=e.body,n=(0,r.take)(o,{message:r.expectString});Object.assign(s,n);const i=new c({$metadata:I(e),...s});return(0,r.decorateServiceException)(i,e.body)},E=async(e,t)=>{const s=(0,r.map)({}),o=e.body,n=(0,r.take)(o,{message:r.expectString});Object.assign(s,n);const i=new d({$metadata:I(e),...s});return(0,r.decorateServiceException)(i,e.body)},b=async(e,t)=>{const s=(0,r.map)({}),o=e.body,n=(0,r.take)(o,{message:r.expectString});Object.assign(s,n);const i=new u({$metadata:I(e),...s});return(0,r.decorateServiceException)(i,e.body)},w=async(e,t)=>{const s=(0,r.map)({}),o=e.body,n=(0,r.take)(o,{message:r.expectString});Object.assign(s,n);const i=new p({$metadata:I(e),...s});return(0,r.decorateServiceException)(i,e.body)},I=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),k=e=>!(null==e||""===e||Object.getOwnPropertyNames(e).includes("length")&&0==e.length||Object.getOwnPropertyNames(e).includes("size")&&0==e.size),C="accountId",R="accessToken",A="account_id",D="roleName",O="role_name",N="x-amz-sso_bearer_token";class q extends(r.Command.classBuilder().ep({...i}).m((function(e,t,s,r){return[(0,n.TM)(s,this.serialize,this.deserialize),(0,o.rD)(s,e.getEndpointParameterInstructions())]})).s("SWBPortalService","GetRoleCredentials",{}).n("SSOClient","GetRoleCredentialsCommand").f(l,m).ser(S).de(f).build()){}var z=s(81095),F=s(39359),T=s(48377),$=s(30499),H=s(11487),U=s(70649),j=s(94171),M=s(47135);const V=async(e,t,s)=>({operation:(0,M.u)(t).operation,region:await(0,M.t)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()}),G=e=>{const t=[];switch(e.operation){case"GetRoleCredentials":case"ListAccountRoles":case"ListAccounts":case"Logout":t.push({schemeId:"smithy.api#noAuth"});break;default:t.push(function(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"awsssoportal",region:e.region},propertiesExtractor:(e,t)=>({signingProperties:{config:e,context:t}})}}(e))}return t};var B=s(94041),_=s(91701),L=s(51881),Z=s(94029),J=s(7809),K=s(3323),W=s(82641),Y=s(94572),Q=s(33197),X=s(66652),ee=s(23875);const te="required",se="fn",oe="argv",ne="ref",re=!0,ie="isSet",ae="booleanEquals",ce="error",de="endpoint",ue="tree",pe="PartitionResult",le="getAttr",he={[te]:!1,type:"String"},me={[te]:!0,default:!1,type:"Boolean"},ge={[ne]:"Endpoint"},ye={[se]:ae,[oe]:[{[ne]:"UseFIPS"},!0]},Se={[se]:ae,[oe]:[{[ne]:"UseDualStack"},!0]},fe={},ve={[se]:le,[oe]:[{[ne]:pe},"supportsFIPS"]},xe={[ne]:pe},Pe={[se]:ae,[oe]:[!0,{[se]:le,[oe]:[xe,"supportsDualStack"]}]},Ee=[ye],be=[Se],we=[{[ne]:"Region"}],Ie={version:"1.0",parameters:{Region:he,UseDualStack:me,UseFIPS:me,Endpoint:he},rules:[{conditions:[{[se]:ie,[oe]:[ge]}],rules:[{conditions:Ee,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:ce},{conditions:be,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:ce},{endpoint:{url:ge,properties:fe,headers:fe},type:de}],type:ue},{conditions:[{[se]:ie,[oe]:we}],rules:[{conditions:[{[se]:"aws.partition",[oe]:we,assign:pe}],rules:[{conditions:[ye,Se],rules:[{conditions:[{[se]:ae,[oe]:[re,ve]},Pe],rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:fe,headers:fe},type:de}],type:ue},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:ce}],type:ue},{conditions:Ee,rules:[{conditions:[{[se]:ae,[oe]:[ve,re]}],rules:[{conditions:[{[se]:"stringEquals",[oe]:[{[se]:le,[oe]:[xe,"name"]},"aws-us-gov"]}],endpoint:{url:"https://portal.sso.{Region}.amazonaws.com",properties:fe,headers:fe},type:de},{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dnsSuffix}",properties:fe,headers:fe},type:de}],type:ue},{error:"FIPS is enabled but this partition does not support FIPS",type:ce}],type:ue},{conditions:be,rules:[{conditions:[Pe],rules:[{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:fe,headers:fe},type:de}],type:ue},{error:"DualStack is enabled but this partition does not support DualStack",type:ce}],type:ue},{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dnsSuffix}",properties:fe,headers:fe},type:de}],type:ue}],type:ue},{error:"Invalid Configuration: Missing Region",type:ce}]},ke=(e,t={})=>(0,ee.sO)(Ie,{endpointParams:e,logger:t.logger});ee.mw.aws=X.UF;var Ce=s(44321);var Re=s(56928),Ae=s(3608);const De=e=>{const t=e.httpAuthSchemes;let s=e.httpAuthSchemeProvider,o=e.credentials;return{setHttpAuthScheme(e){const s=t.findIndex((t=>t.schemeId===e.schemeId));-1===s?t.push(e):t.splice(s,1,e)},httpAuthSchemes:()=>t,setHttpAuthSchemeProvider(e){s=e},httpAuthSchemeProvider:()=>s,setCredentials(e){o=e},credentials:()=>o}};class Oe extends r.Client{constructor(...[e]){const t=(e=>{(0,r.emitWarningIfUnsupportedVersion)(process.version);const t=(0,Ce.I)(e),s=()=>t().then(r.loadConfigsForDefaultMode),o=(e=>({apiVersion:"2019-06-10",base64Decoder:e?.base64Decoder??Y.E,base64Encoder:e?.base64Encoder??Y.n,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??ke,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??G,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new g.AwsSdkSigV4Signer},{schemeId:"smithy.api#noAuth",identityProvider:e=>e.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new y.NoAuthSigner}],logger:e?.logger??new r.NoOpLogger,serviceId:e?.serviceId??"SSO",urlParser:e?.urlParser??W.D,utf8Decoder:e?.utf8Decoder??Q.ar,utf8Encoder:e?.utf8Encoder??Q.Pq}))(e);return(0,g.emitWarningIfUnsupportedVersion)(process.version),{...o,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:e?.bodyLengthChecker??J.n,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,B.mJ)({serviceId:o.serviceId,clientVersion:"3.583.0"}),maxAttempts:e?.maxAttempts??(0,L.Z)(j.qs),region:e?.region??(0,L.Z)(H.GG,H.zH),requestHandler:Z.$c.create(e?.requestHandler??s),retryMode:e?.retryMode??(0,L.Z)({...j.kN,default:async()=>(await s()).retryMode||K.L0}),sha256:e?.sha256??_.V.bind(null,"sha256"),streamCollector:e?.streamCollector??Z.kv,useDualstackEndpoint:e?.useDualstackEndpoint??(0,L.Z)(H.e$),useFipsEndpoint:e?.useFipsEndpoint??(0,L.Z)(H.Ko)}})(e||{}),s=(n=t,{...n,useDualstackEndpoint:n.useDualstackEndpoint??!1,useFipsEndpoint:n.useFipsEndpoint??!1,defaultSigningName:"awsssoportal"});var n;const i=(0,H.TD)(s),a=(0,o.Co)(i),c=(0,j.$z)(a),d=(0,z.OV)(c);var u;const p=((e,t)=>{const s={...(0,Re.Rq)(e),...(0,r.getDefaultExtensionConfiguration)(e),...(0,Ae.getHttpHandlerExtensionConfiguration)(e),...De(e)};return t.forEach((e=>e.configure(s))),{...e,...(0,Re.$3)(s),...(0,r.resolveDefaultRuntimeConfig)(s),...(0,Ae.resolveHttpHandlerRuntimeConfig)(s),...(o=s,{httpAuthSchemes:o.httpAuthSchemes(),httpAuthSchemeProvider:o.httpAuthSchemeProvider(),credentials:o.credentials()})};var o})((u=(0,$.Dc)(d),{...(0,g.resolveAwsSdkSigV4Config)(u)}),e?.extensions||[]);super(p),this.config=p,this.middlewareStack.use((0,j.ey)(this.config)),this.middlewareStack.use((0,U.vK)(this.config)),this.middlewareStack.use((0,z.TC)(this.config)),this.middlewareStack.use((0,F.Y7)(this.config)),this.middlewareStack.use((0,T.n4)(this.config)),this.middlewareStack.use((0,$.sM)(this.config)),this.middlewareStack.use((0,y.getHttpAuthSchemeEndpointRuleSetPlugin)(this.config,{httpAuthSchemeParametersProvider:this.getDefaultHttpAuthSchemeParametersProvider(),identityProviderConfigProvider:this.getIdentityProviderConfigProvider()})),this.middlewareStack.use((0,y.getHttpSigningPlugin)(this.config))}destroy(){super.destroy()}getDefaultHttpAuthSchemeParametersProvider(){return V}getIdentityProviderConfigProvider(){return async e=>new y.DefaultIdentityProviderConfig({"aws.auth#sigv4":e.credentials})}}}};