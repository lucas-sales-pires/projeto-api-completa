"use strict";exports.id=102,exports.ids=[102],exports.modules={23102:(e,t,n)=>{n.d(t,{CognitoIdentityClient:()=>ie,GetCredentialsForIdentityCommand:()=>He,GetIdCommand:()=>Ue});var o=n(81095),i=n(39359),r=n(48377),s=n(30499),a=n(11487),c=n(63847),d=n(70649),p=n(99389),u=n(94171),l=n(77940),h=n(45685),m=n(47135);const y=async(e,t,n)=>({operation:(0,m.u)(t).operation,region:await(0,m.t)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()}),g=e=>{const t=[];switch(e.operation){case"GetCredentialsForIdentity":case"GetId":case"GetOpenIdToken":case"UnlinkIdentity":t.push({schemeId:"smithy.api#noAuth"});break;default:t.push(function(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"cognito-identity",region:e.region},propertiesExtractor:(e,t)=>({signingProperties:{config:e,context:t}})}}(e))}return t},f={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}};var x=n(38257),E=n(94041),v=n(91701),S=n(51881),P=n(94029),w=n(7809),I=n(3323),C=n(82641),b=n(94572),A=n(33197),$=n(66652),D=n(23875);const R="required",k="fn",O="argv",z="ref",j=!0,F="isSet",q="booleanEquals",M="error",N="endpoint",H="tree",U="PartitionResult",_={[R]:!1,type:"String"},G={[R]:!0,default:!1,type:"Boolean"},T={[z]:"Endpoint"},B={[k]:q,[O]:[{[z]:"UseFIPS"},!0]},L={[k]:q,[O]:[{[z]:"UseDualStack"},!0]},V={},J={[k]:"getAttr",[O]:[{[z]:U},"supportsFIPS"]},W={[k]:q,[O]:[!0,{[k]:"getAttr",[O]:[{[z]:U},"supportsDualStack"]}]},Z=[B],K=[L],Y=[{[z]:"Region"}],Q={version:"1.0",parameters:{Region:_,UseDualStack:G,UseFIPS:G,Endpoint:_},rules:[{conditions:[{[k]:F,[O]:[T]}],rules:[{conditions:Z,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:M},{conditions:K,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:M},{endpoint:{url:T,properties:V,headers:V},type:N}],type:H},{conditions:[{[k]:F,[O]:Y}],rules:[{conditions:[{[k]:"aws.partition",[O]:Y,assign:U}],rules:[{conditions:[B,L],rules:[{conditions:[{[k]:q,[O]:[j,J]},W],rules:[{endpoint:{url:"https://cognito-identity-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:V,headers:V},type:N}],type:H},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:M}],type:H},{conditions:Z,rules:[{conditions:[{[k]:q,[O]:[J,j]}],rules:[{endpoint:{url:"https://cognito-identity-fips.{Region}.{PartitionResult#dnsSuffix}",properties:V,headers:V},type:N}],type:H},{error:"FIPS is enabled but this partition does not support FIPS",type:M}],type:H},{conditions:K,rules:[{conditions:[W],rules:[{endpoint:{url:"https://cognito-identity.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:V,headers:V},type:N}],type:H},{error:"DualStack is enabled but this partition does not support DualStack",type:M}],type:H},{endpoint:{url:"https://cognito-identity.{Region}.{PartitionResult#dnsSuffix}",properties:V,headers:V},type:N}],type:H}],type:H},{error:"Invalid Configuration: Missing Region",type:M}]},X=(e,t={})=>(0,D.sO)(Q,{endpointParams:e,logger:t.logger});D.mw.aws=$.UF;var ee=n(44321);var te=n(56928),ne=n(3608);const oe=e=>{const t=e.httpAuthSchemes;let n=e.httpAuthSchemeProvider,o=e.credentials;return{setHttpAuthScheme(e){const n=t.findIndex((t=>t.schemeId===e.schemeId));-1===n?t.push(e):t.splice(n,1,e)},httpAuthSchemes:()=>t,setHttpAuthSchemeProvider(e){n=e},httpAuthSchemeProvider:()=>n,setCredentials(e){o=e},credentials:()=>o}};class ie extends l.Client{constructor(...[e]){const t=(e=>{(0,l.emitWarningIfUnsupportedVersion)(process.version);const t=(0,ee.I)(e),n=()=>t().then(l.loadConfigsForDefaultMode),o=(e=>({apiVersion:"2014-06-30",base64Decoder:e?.base64Decoder??b.E,base64Encoder:e?.base64Encoder??b.n,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??X,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??g,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new h.AwsSdkSigV4Signer},{schemeId:"smithy.api#noAuth",identityProvider:e=>e.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new c.NoAuthSigner}],logger:e?.logger??new l.NoOpLogger,serviceId:e?.serviceId??"Cognito Identity",urlParser:e?.urlParser??C.D,utf8Decoder:e?.utf8Decoder??A.ar,utf8Encoder:e?.utf8Encoder??A.Pq}))(e);return(0,h.emitWarningIfUnsupportedVersion)(process.version),{...o,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:e?.bodyLengthChecker??w.n,credentialDefaultProvider:e?.credentialDefaultProvider??x.v6,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,E.mJ)({serviceId:o.serviceId,clientVersion:"3.583.0"}),maxAttempts:e?.maxAttempts??(0,S.Z)(u.qs),region:e?.region??(0,S.Z)(a.GG,a.zH),requestHandler:P.$c.create(e?.requestHandler??n),retryMode:e?.retryMode??(0,S.Z)({...u.kN,default:async()=>(await n()).retryMode||I.L0}),sha256:e?.sha256??v.V.bind(null,"sha256"),streamCollector:e?.streamCollector??P.kv,useDualstackEndpoint:e?.useDualstackEndpoint??(0,S.Z)(a.e$),useFipsEndpoint:e?.useFipsEndpoint??(0,S.Z)(a.Ko)}})(e||{}),n=(m=t,{...m,useDualstackEndpoint:m.useDualstackEndpoint??!1,useFipsEndpoint:m.useFipsEndpoint??!1,defaultSigningName:"cognito-identity"});var m;const y=(0,a.TD)(n),f=(0,p.Co)(y),$=(0,u.$z)(f),D=(0,o.OV)($);var R;const k=((e,t)=>{const n={...(0,te.Rq)(e),...(0,l.getDefaultExtensionConfiguration)(e),...(0,ne.getHttpHandlerExtensionConfiguration)(e),...oe(e)};return t.forEach((e=>e.configure(n))),{...e,...(0,te.$3)(n),...(0,l.resolveDefaultRuntimeConfig)(n),...(0,ne.resolveHttpHandlerRuntimeConfig)(n),...(o=n,{httpAuthSchemes:o.httpAuthSchemes(),httpAuthSchemeProvider:o.httpAuthSchemeProvider(),credentials:o.credentials()})};var o})((R=(0,s.Dc)(D),{...(0,h.resolveAwsSdkSigV4Config)(R)}),e?.extensions||[]);super(k),this.config=k,this.middlewareStack.use((0,u.ey)(this.config)),this.middlewareStack.use((0,d.vK)(this.config)),this.middlewareStack.use((0,o.TC)(this.config)),this.middlewareStack.use((0,i.Y7)(this.config)),this.middlewareStack.use((0,r.n4)(this.config)),this.middlewareStack.use((0,s.sM)(this.config)),this.middlewareStack.use((0,c.getHttpAuthSchemeEndpointRuleSetPlugin)(this.config,{httpAuthSchemeParametersProvider:this.getDefaultHttpAuthSchemeParametersProvider(),identityProviderConfigProvider:this.getIdentityProviderConfigProvider()})),this.middlewareStack.use((0,c.getHttpSigningPlugin)(this.config))}destroy(){super.destroy()}getDefaultHttpAuthSchemeParametersProvider(){return y}getIdentityProviderConfigProvider(){return async e=>new c.DefaultIdentityProviderConfig({"aws.auth#sigv4":e.credentials})}}var re=n(1208);class se extends l.ServiceException{constructor(e){super(e),Object.setPrototypeOf(this,se.prototype)}}class ae extends se{constructor(e){super({name:"InternalErrorException",$fault:"server",...e}),this.name="InternalErrorException",this.$fault="server",Object.setPrototypeOf(this,ae.prototype)}}class ce extends se{constructor(e){super({name:"InvalidParameterException",$fault:"client",...e}),this.name="InvalidParameterException",this.$fault="client",Object.setPrototypeOf(this,ce.prototype)}}class de extends se{constructor(e){super({name:"LimitExceededException",$fault:"client",...e}),this.name="LimitExceededException",this.$fault="client",Object.setPrototypeOf(this,de.prototype)}}class pe extends se{constructor(e){super({name:"NotAuthorizedException",$fault:"client",...e}),this.name="NotAuthorizedException",this.$fault="client",Object.setPrototypeOf(this,pe.prototype)}}class ue extends se{constructor(e){super({name:"ResourceConflictException",$fault:"client",...e}),this.name="ResourceConflictException",this.$fault="client",Object.setPrototypeOf(this,ue.prototype)}}class le extends se{constructor(e){super({name:"TooManyRequestsException",$fault:"client",...e}),this.name="TooManyRequestsException",this.$fault="client",Object.setPrototypeOf(this,le.prototype)}}class he extends se{constructor(e){super({name:"ResourceNotFoundException",$fault:"client",...e}),this.name="ResourceNotFoundException",this.$fault="client",Object.setPrototypeOf(this,he.prototype)}}class me extends se{constructor(e){super({name:"ExternalServiceException",$fault:"client",...e}),this.name="ExternalServiceException",this.$fault="client",Object.setPrototypeOf(this,me.prototype)}}class ye extends se{constructor(e){super({name:"InvalidIdentityPoolConfigurationException",$fault:"client",...e}),this.name="InvalidIdentityPoolConfigurationException",this.$fault="client",Object.setPrototypeOf(this,ye.prototype)}}class ge extends se{constructor(e){super({name:"DeveloperUserAlreadyRegisteredException",$fault:"client",...e}),this.name="DeveloperUserAlreadyRegisteredException",this.$fault="client",Object.setPrototypeOf(this,ge.prototype)}}class fe extends se{constructor(e){super({name:"ConcurrentModificationException",$fault:"client",...e}),this.name="ConcurrentModificationException",this.$fault="client",Object.setPrototypeOf(this,fe.prototype)}}const xe=async(e,t)=>{const n=Ne("GetCredentialsForIdentity");let o;return o=JSON.stringify((0,l._json)(e)),Me(t,n,"/",void 0,o)},Ee=async(e,t)=>{const n=Ne("GetId");let o;return o=JSON.stringify((0,l._json)(e)),Me(t,n,"/",void 0,o)},ve=async(e,t)=>{if(e.statusCode>=300)return Pe(e,t);const n=await(0,h.parseJsonBody)(e.body,t);let o={};return o=je(n,t),{$metadata:Fe(e),...o}},Se=async(e,t)=>{if(e.statusCode>=300)return Pe(e,t);const n=await(0,h.parseJsonBody)(e.body,t);let o={};return o=(0,l._json)(n),{$metadata:Fe(e),...o}},Pe=async(e,t)=>{const n={...e,body:await(0,h.parseJsonErrorBody)(e.body,t)},o=(0,h.loadRestJsonErrorCode)(e,n.body);switch(o){case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":throw await be(n,t);case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":throw await $e(n,t);case"LimitExceededException":case"com.amazonaws.cognitoidentity#LimitExceededException":throw await De(n,t);case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":throw await Re(n,t);case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":throw await ke(n,t);case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":throw await ze(n,t);case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":throw await Oe(n,t);case"ExternalServiceException":case"com.amazonaws.cognitoidentity#ExternalServiceException":throw await Ce(n,t);case"InvalidIdentityPoolConfigurationException":case"com.amazonaws.cognitoidentity#InvalidIdentityPoolConfigurationException":throw await Ae(n,t);case"DeveloperUserAlreadyRegisteredException":case"com.amazonaws.cognitoidentity#DeveloperUserAlreadyRegisteredException":throw await Ie(n,t);case"ConcurrentModificationException":case"com.amazonaws.cognitoidentity#ConcurrentModificationException":throw await we(n,t);default:const i=n.body;return qe({output:e,parsedBody:i,errorCode:o})}},we=async(e,t)=>{const n=e.body,o=(0,l._json)(n),i=new fe({$metadata:Fe(e),...o});return(0,l.decorateServiceException)(i,n)},Ie=async(e,t)=>{const n=e.body,o=(0,l._json)(n),i=new ge({$metadata:Fe(e),...o});return(0,l.decorateServiceException)(i,n)},Ce=async(e,t)=>{const n=e.body,o=(0,l._json)(n),i=new me({$metadata:Fe(e),...o});return(0,l.decorateServiceException)(i,n)},be=async(e,t)=>{const n=e.body,o=(0,l._json)(n),i=new ae({$metadata:Fe(e),...o});return(0,l.decorateServiceException)(i,n)},Ae=async(e,t)=>{const n=e.body,o=(0,l._json)(n),i=new ye({$metadata:Fe(e),...o});return(0,l.decorateServiceException)(i,n)},$e=async(e,t)=>{const n=e.body,o=(0,l._json)(n),i=new ce({$metadata:Fe(e),...o});return(0,l.decorateServiceException)(i,n)},De=async(e,t)=>{const n=e.body,o=(0,l._json)(n),i=new de({$metadata:Fe(e),...o});return(0,l.decorateServiceException)(i,n)},Re=async(e,t)=>{const n=e.body,o=(0,l._json)(n),i=new pe({$metadata:Fe(e),...o});return(0,l.decorateServiceException)(i,n)},ke=async(e,t)=>{const n=e.body,o=(0,l._json)(n),i=new ue({$metadata:Fe(e),...o});return(0,l.decorateServiceException)(i,n)},Oe=async(e,t)=>{const n=e.body,o=(0,l._json)(n),i=new he({$metadata:Fe(e),...o});return(0,l.decorateServiceException)(i,n)},ze=async(e,t)=>{const n=e.body,o=(0,l._json)(n),i=new le({$metadata:Fe(e),...o});return(0,l.decorateServiceException)(i,n)},je=(e,t)=>(0,l.take)(e,{Credentials:e=>((e,t)=>(0,l.take)(e,{AccessKeyId:l.expectString,Expiration:e=>(0,l.expectNonNull)((0,l.parseEpochTimestamp)((0,l.expectNumber)(e))),SecretKey:l.expectString,SessionToken:l.expectString}))(e),IdentityId:l.expectString}),Fe=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),qe=(0,l.withBaseException)(se),Me=async(e,t,n,o,i)=>{const{hostname:r,protocol:s="https",port:a,path:c}=await e.endpoint(),d={protocol:s,hostname:r,port:a,method:"POST",path:c.endsWith("/")?c.slice(0,-1)+n:c+n,headers:t};return void 0!==o&&(d.hostname=o),void 0!==i&&(d.body=i),new ne.HttpRequest(d)};function Ne(e){return{"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityService.${e}`}}class He extends(l.Command.classBuilder().ep({...f}).m((function(e,t,n,o){return[(0,re.TM)(n,this.serialize,this.deserialize),(0,p.rD)(n,e.getEndpointParameterInstructions())]})).s("AWSCognitoIdentityService","GetCredentialsForIdentity",{}).n("CognitoIdentityClient","GetCredentialsForIdentityCommand").f(void 0,void 0).ser(xe).de(ve).build()){}class Ue extends(l.Command.classBuilder().ep({...f}).m((function(e,t,n,o){return[(0,re.TM)(n,this.serialize,this.deserialize),(0,p.rD)(n,e.getEndpointParameterInstructions())]})).s("AWSCognitoIdentityService","GetId",{}).n("CognitoIdentityClient","GetIdCommand").f(void 0,void 0).ser(Ee).de(Se).build()){}}};